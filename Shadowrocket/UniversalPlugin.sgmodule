#!name = Universal Plugin & UA Adapter ‚ú®
#!desc = User-Agent ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô Kelee Hub , ddgksf2013 ‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Shadowrocket ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ScriptHub)
#!author = Matrix & iKeLee & Gemini
#!category = üîó ADAPTER

[Header Rewrite]
# 1. ‡∏õ‡∏•‡∏≠‡∏° User-Agent ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏ü‡∏•‡πå (KeLee & ddgksf2013)
http-request ^https?:\/\/(.*(kelee\.one|ddgksf2013\.top))(\/.*)? header-replace User-Agent "Surge iOS/3535"
http-response ^https?:\/\/(.*(kelee\.one|ddgksf2013\.top))(\/.*)? header-add content-disposition "inline"
http-response ^https?:\/\/(.*(kelee\.one|ddgksf2013\.top))(\/.*)? header-replace content-type "text/plain; charset=utf-8"

# 2. ‡∏•‡πâ‡∏≤‡∏á Cache ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏±‡πä‡∏Å‡∏≠‡∏¥‡∏ô
http-request ^https?:\/\/(hub|pluginhub)\.kelee\.one\/list\.json header-del if-none-match

[Body Rewrite]
# 3. ‡πÅ‡∏õ‡∏•‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö Kelee ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏≠‡∏á Shadowrocket (‡∏ú‡πà‡∏≤‡∏ô ScriptHub)
http-response ^https?:\/\/(hub|pluginhub)\.kelee\.one\/list\.json "loon://import\?plugin=(https://kelee.one/Tool/Loon/Lpx/(.+).lpx)" "shadowrocket://install?module=http://script.hub/file/_start_/$1/_end_/$2.sgmodule%3Ftype%3Dloon-plugin%26target%3Dshadowrocket-module%26del%3Dtrue%26jqEnabled%3Dtrue"

[Script]
qx-resource-preview = type=http-request, pattern=^https:\/\/quantumult\.app\/x\/open-app\/add-resource\?remote-resource=, script-path=https://github.com/chengkongyiban/shadowrocket/raw/main/scripts/qx-resource-preview.js, requires-body=true, max-size=-1, timeout=60

[MITM]
hostname = %APPEND% quantumult.app, ddgksf2013.top, hub.kelee.one, pluginhub.kelee.one, *.kelee.one, 