#!name=Universal Plugin Adapter ‚ú®
#!desc=‡πÅ‡∏õ‡∏•‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å Kelee Hub, Loon-Plugin (Vercel) ‡πÅ‡∏•‡∏∞ Sooyaaa ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Shadowrocket ‡∏ú‡πà‡∏≤‡∏ô ScriptHub
#!category=üîó ADAPTER
#!author=Gemini & iKeLee
#!system=ios

[Body Rewrite]
# 1. ‡πÅ‡∏õ‡∏•‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å Kelee Plugin Hub (loon:// -> shadowrocket://)
http-response ^https?:\/\/(hub|pluginhub)\.kelee\.one\/list\.json "loon://import\?plugin=(https://kelee.one/Tool/Loon/Lpx/(.+).lpx)" "shadowrocket:///add-module?url=http://script.hub/file/_start_/$1/_end_/$2.sgmodule%3Ftype%3Dloon-plugin%26target%3Dshadowrocket-module"

# 2. ‡πÅ‡∏õ‡∏•‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏à‡∏≤‡∏Å Loon-Plugin Vercel ‡πÅ‡∏•‡∏∞ Sooyaaa (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå .plugin ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
http-response ^https?:\/\/(loon-plugin\.vercel\.app|sooyaaabo\.github\.io) "loon://import\?plugin=(https?:\/\/[^\s\"']+)" "shadowrocket:///add-module?url=http://script.hub/file/_start_/$1/_end_/plugin.sgmodule%3Ftype%3Dloon-plugin%26target%3Dshadowrocket-module"

[Header Rewrite]
# ‡∏•‡πâ‡∏≤‡∏á Cache ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏°‡∏≠
^https?:\/\/(hub|pluginhub)\.kelee\.one\/list\.json header-del if-none-match

[MITM]
hostname = %APPEND% hub.kelee.one, pluginhub.kelee.one, loon-plugin.vercel.app, sooyaaabo.github.io